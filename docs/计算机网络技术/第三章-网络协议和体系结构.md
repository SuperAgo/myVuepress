---
title: 第三章 网络协议和体系结构
tags:
  - 计算机网络技术
categories:
  - 复习
date: 2020-07-14 09:30:00
publish: false
---
## 基本知识  
### 1、【单选、填空】网络协议和体系结构  
(1)概念：为了保证通信正常进行，必须事先做一些规定，而且**通信双方要正确执行这些规定，这种规定称为协议或规程**。  

(2)要素：语法、语义和时序关系  
①**语法**：规定通信双方“如何讲”，即确定数据格式、数据码型和信号电平等。  
②**语义**：规定通信双方“讲什么”，即确定协议元素的类型，如规定通信双方要发出什么控制信息、执行什么动作和返回什么应答等。  
③**时序关系**：规定事件执行的顺序，即确定数据通信过程中通信状态的变化，如规定正确的应答关系等。  

(3)分层的优点  
①各层次之间**互相独立**；  
②有较强的**灵活性**，便于实现和维护；    
③分层的思想有利于**标准化**。

## OSI参考模型  

### 1、【单选】功能  
①**物理层**：主要功能是传输介质上实现无结构比特流传输。  
②**数据链路层**：主要功能是实现在相邻节点之间的数据可靠而有效的传输。  
③**网络层**：解决的核心问题是如何将分组通过交换网络传送至目的主机。  
④**传输层**：是第一个端到端的层次，也是进程——进程的层次。  
⑤**会话层**：指用户与用户的连接，它通过在两台计算机间建立、管理和终止通信来完成对话。  
⑥**表示层**：主要用于处理应用实体间交换数据的语法，其目的是解决格式和数据表示的差别，从而为应用层提供一个一致的数据格式，从而使字符、格式等有差异的设备之间相互通信。  
⑦**应用层**：与提供给用户的网络服务相关，这些服务非常丰富，包括文件传送、电子邮件和P2P应用等。  

### 2、【简答】有关术语  
(1)**数据单元**：在层的实体之间传送的**比特组**称为数据单元。  
(2)**服务访问点**：相邻间的服务是通过其接口面上的服务访问点（SAP）进行的，N层SAP就是N+1层可以访问N层的地方。  
(3)**服务原语**：  

请求|用户实体请求服务做工作  
:-|:-  
指示|用户实体被告知某件事发生  
响应|用户实体表示对某件事的响应  
确认|用户实体收到关于它的请求的答复

### 3、【单选、填空】连接方式  
(1)**面向连接**：以电话系统最为典型，假设要和某人通话，其过程为：**拿起电话——拨号码——接通——通话——挂断**。  
(2)**无连接**：又称数据报服务，没有建立和拆除链路的过程，要求每一个分组信息带有全程地址，独立选择路径，其到达目的地的顺序也是不定的，到达目的地后，还要重新分组进行排序。  

## TCP/IP参考模型  
### 1、【单选、填空】功能  
(1)**应用层**：TCP/IP参考模型将OSI参考模型中的会话层和表示层的功能合并到应用层实现。  
(2)**传输层**：负责把数据传输到接收方主机上对等的应用层程序，传输层协议为运行在不同主机上的进程提供了一种逻辑通信机制，其中包括了熟知端口的分配。  
①21端口分配至FTP；②25端口分配给SMTP  
③80端口分配给HTTP；④135端口分配给RPC  
(3)**网络互联层**：是整个TCP/IP参考模型的核心，主要解决把数据分组发往的网络或主机的问题。  
(4)**网络接口层**：实际上TCP/IP参考模型没有真正描述这一层的实现，只是要求能够提供给网络互联层一个访问接口，以便在其上传递IP分组。  

### 2、【单选、简答】TCP和UDP  
(1)TCP  
①定义：是一种面向连接的、可靠的、基于字节流的传输层通信协议，由IETF的RFC 793定义，在TCP/IP参考模型中位于**网络互联层之上，应用层之下**。  
②连接阶段：TCP连接管理包括**连接建立、数据传输和连接拆除**3个阶段。  
③连接过程要解决的问题：  
a.要**使通信的双方能够确知对方的存在**。  
b.要**允许双方协商通信过程中的相关参数**。  
c.能够**对传输实体的资源进行分配**。  

④**连接过程**：假设A主机运行TCP客户程序，B主机运行TCP服务程序。  

第一次握手|A的TCP向B发出连接请求报文，其首部中的同部位SYN=1，并选择初始序号seq=x，表明传送数据的第一个字节的序号是x。
:-|:-
第二次握手|B的TCP收到链接请求报文段后，如同意，则发回确认。B在确认报文段中应使SYN=1，ACK=1，其确认序号ack_seq=x+1，自己选择的初始序号seq=y
第三次握手|A收到此确认报文段后向B给出确认，其中ACK=1，SYN=0，ack_seq=y+1
⑤**连接拆除**：  

第一次握手|TCP通信的双方都可以拆除连接，假设拆除连接由A发出，则A向B发送释放连接控制报文段，并停止再发送数据。控制报文段首部中的终止控制位FIN位置为1，其序号seq=u，然后A等待B的确认
:-|:-
第二次握手|B收到A发出的释放连接控制报文段后，立即向A发送确认报文段，确认报文段的ACK位置1，确认序号ack_seq=1，设确认报文段自己的序号seq=v。A收到来自B的确认后，进入等待状态，等待B发出的释放连接控制报文段
第三次握手|如果B已经没有要向A发送的数据，则B向A发送释放连接控制报文段，其首部中FIN位置为1，假设此时B要发送的报文段序号seq为w，而确认序号sck_seq仍然为u+1
第四次握手|A收到B的释放连接控制报文段后，要向B发送确认报文段，其中的ACK位置为1，序号seq=u+1，确认序号ack_seq=w+1。B收到该确认报文段后，马上释放连接；A在发出该确认后，延迟一段时间即释放连接

⑥工作机制  

<table>
	<tr>
		<td>应用数据被分割成TCP认为最适合发送的数据块</td>
	</tr>
	<tr>
		<td>当TCP发出一个段后，它启动了一个定时器，等待目的端确认收到这个报文段</td>
	</tr>
	<tr>
		<td>TCP首部中设有检验和字段，用于检测数据在传输过程中是否发生变化</td>
	</tr>
	<tr>
		<td>由于TCP报文段作为IP数据报来传输，而IP数据报的到达可能会经过不同的路径，从而造成顺序的错乱，因此TCP报文段的到达也可能会失序</td>
	</tr>
	<tr>
		<td>由于存在网络延迟和重传机制，TCP的接收端有可能会受到多个重复的报文段，这时接收端要对重复的报文段进行丢弃</td>
	</tr>
	<tr>
		<td>TCP能够提供流量控制</td>
	</tr>
</table>

(2)UDP  
①定义：用户数据报协议（UDP），是一种无连接的传输层协议。  
②特点：UDP是一个不可靠的协议，但它非常适合用于速率要求高，而对精度要求相对较低的网络应用，尤其是各种多媒体实时业务，如视频会议、视频点播和网络电话等。  
③工作机制：  
<table>
	<tr>
		<td>UDP是一个无连接协议，传输数据之前源端和终端不建立连接，当UDP想传输时就简单的去抓取来自应用程序的数据，并尽可能快的把它送到网络上</td>
	</tr>
	<tr>
		<td>由于传输数据不建立连接，因此就不需要维护连接状态，包括收发状态等，因此一台服务机可同时向多个客户机传输相同的消息</td>
	</tr>
	<tr>
		<td>UDP数据报的首部很短，只有八个音节，相对于TCP的20个音节首部，其数据报的额外开销很小</td>
	</tr>
	<tr>
		<td>吞吐量不受拥塞控制算法的条件，只受应用软件生成数据的速率、传输带宽、源端和终端主机性能的限制</td>
	</tr>
	<tr>
		<td>UDP使用最大努力交付，即不保证可靠交付，因此主机不需要维护复杂的连接状态表</td>
	</tr>
	<tr>
		<td>UDP是面向报文的</td>
	</tr>
</table>